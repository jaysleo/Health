(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/exp/exp"],{"2d0b":function(t,e,n){},"3e56":function(t,e,n){"use strict";(function(t){n("4766");o(n("66fd"));var e=o(n("e075"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},"80f0":function(t,e,n){"use strict";n.r(e);var o=n("cabb"),i=n.n(o);for(var a in o)"default"!==a&&function(t){n.d(e,t,(function(){return o[t]}))}(a);e["default"]=i.a},"93a2":function(t,e,n){"use strict";var o=n("2d0b"),i=n.n(o);i.a},bf27:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return o}));var o={uRow:function(){return n.e("node-modules/uview-ui/components/u-row/u-row").then(n.bind(null,"88f1"))},uCol:function(){return n.e("node-modules/uview-ui/components/u-col/u-col").then(n.bind(null,"25c8"))},uImage:function(){return n.e("node-modules/uview-ui/components/u-image/u-image").then(n.bind(null,"862e"))},uButton:function(){return n.e("node-modules/uview-ui/components/u-button/u-button").then(n.bind(null,"e587"))},uEmpty:function(){return n.e("node-modules/uview-ui/components/u-empty/u-empty").then(n.bind(null,"9faf"))},uIcon:function(){return n.e("node-modules/uview-ui/components/u-icon/u-icon").then(n.bind(null,"f2a6"))},uModal:function(){return n.e("node-modules/uview-ui/components/u-modal/u-modal").then(n.bind(null,"f564"))},uForm:function(){return n.e("node-modules/uview-ui/components/u-form/u-form").then(n.bind(null,"d921"))},uFormItem:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u-form-item/u-form-item")]).then(n.bind(null,"13db"))},uInput:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u-input/u-input")]).then(n.bind(null,"9086"))},uUpload:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u-upload/u-upload")]).then(n.bind(null,"59d0"))}},i=function(){var t=this,e=t.$createElement;t._self._c;t._isMounted||(t.e0=function(e){t.addModal=!0})},a=[]},cabb:function(t,e,n){"use strict";(function(t){function n(t){return u(t)||a(t)||i(t)||o()}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(t,e){if(t){if("string"===typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}function a(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function u(t){if(Array.isArray(t))return r(t)}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=getApp(),c={data:function(){return{commentList:[],show:!1,addModal:!1,addForm:{},replyModal:!1,replyContent:"",pagenumber:1,pagesize:5,imgs:[]}},onLoad:function(){this.getExpList()},onShow:function(){},watch:{commentList:function(){var t=this;this.show=!1,setTimeout((function(){t.show=!0}),10)}},onReachBottom:function(){this.getExpList()},methods:{getExpList:function(){var e=this;wx.request({url:s.globalData.appHttps+"/topic/gettopic",method:"GET",header:{Accept:"*/*","Content-Type":"application/json;charset=UTF-8","X-Access-Token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJleHAiOjE2MTg3OTY1NzMsInVzZXJuYW1lIjoieHMxODB4eHh4ODQ4NCJ9.vURqw-2UrWXA_mjL69Ts5vZfEmKl1M8ZSIqKf25A-iY"},data:{sjkids:t.getStorageSync("sjkids"),pagesize:this.pagesize,pagenumber:this.pagenumber,hasReply:1},success:function(t){if(200==t.data.code&&t.data.data.length>0){for(var o in t.data.data)for(var i in t.data.data[o].imgs=JSON.parse(t.data.data[o].imgs),t.data.data[o].sendtime=e.dateStr(t.data.data[o].sendtime),t.data.data[o].replys)t.data.data[o].replys[i].time=e.dateStr(t.data.data[o].replys[i].time);setTimeout((function(){e.commentList=[].concat(n(e.commentList),n(t.data.data)),e.pagenumber++}),500)}}})},reply:function(t){this.replyId=t,this.replyModal=!0},replySend:function(){var e=this;if(!this.replyContent)return t.showToast({title:"请填写内容",icon:"none"}),!1;wx.request({url:s.globalData.appHttps+"/topic/addReply",method:"POST",header:{Accept:"*/*","Content-Type":"application/json;charset=UTF-8","X-Access-Token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJleHAiOjE2MTg3OTY1NzMsInVzZXJuYW1lIjoieHMxODB4eHh4ODQ4NCJ9.vURqw-2UrWXA_mjL69Ts5vZfEmKl1M8ZSIqKf25A-iY"},data:{topicid:this.replyId,content:this.replyContent,name:t.getStorageSync("userInfo").nickName,avatar:t.getStorageSync("userInfo").avatarUrl},success:function(n){200==n.data.code&&(t.showToast({title:"提交成功"}),e.replyModal=!1,e.pagenumber=1,e.commentList=[],e.getExpList())}})},add:function(){var e=this;return this.addForm.title?this.addForm.msgContent?void wx.request({url:s.globalData.appHttps+"/topic/addTopic",method:"POST",header:{Accept:"*/*","Content-Type":"application/json;charset=UTF-8","X-Access-Token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJleHAiOjE2MTg3OTY1NzMsInVzZXJuYW1lIjoieHMxODB4eHh4ODQ4NCJ9.vURqw-2UrWXA_mjL69Ts5vZfEmKl1M8ZSIqKf25A-iY"},data:{sjkids:t.getStorageSync("sjkids"),title:this.addForm.title,content:this.addForm.msgContent,imgs:JSON.stringify(this.imgs),sendername:t.getStorageSync("userInfo").nickName,avatar:t.getStorageSync("userInfo").avatarUrl},success:function(n){200==n.data.code&&(t.showToast({title:"提交成功"}),e.addModal=!1,e.pagenumber=1,e.commentList=[],e.getExpList())}}):(t.showToast({title:"请填写内容",icon:"none"}),!1):(t.showToast({title:"请填写标题",icon:"none"}),!1)},imgUpload:function(t){console.log(t),200==t.code&&(this.imgs.push("https://api.ifufan.com:8800/img/"+t.data.filename),console.log(this.imgs))},previewImage:function(t,e){wx.previewImage({current:t,urls:e})},dateStr:function(t){var e,n=(new Date).getTime();return n=parseInt((n-t)/1e3),n<600?"刚刚":n<3600&&n>=600?(e=Math.floor(n/60),e+"分钟前"):n<86400&&n>=3600?(e=Math.floor(n/60/60),e+"小时前"):n<259200&&n>=86400?(e=Math.floor(n/60/60/24),e+"天前"):t}}};e.default=c}).call(this,n("543d")["default"])},e075:function(t,e,n){"use strict";n.r(e);var o=n("bf27"),i=n("80f0");for(var a in i)"default"!==a&&function(t){n.d(e,t,(function(){return i[t]}))}(a);n("93a2");var u,r=n("f0c5"),s=Object(r["a"])(i["default"],o["b"],o["c"],!1,null,"8a032bae",null,!1,o["a"],u);e["default"]=s.exports}},[["3e56","common/runtime","common/vendor"]]]);