(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{"0dc2":function(t,e,n){"use strict";(function(t){n("4766");a(n("66fd"));var e=a(n("ccc1"));function a(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},1306:function(t,e,n){"use strict";n.r(e);var a=n("78ae"),o=n.n(a);for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);e["default"]=o.a},"72be":function(t,e,n){},"78ae":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=getApp(),o=n("5ae6"),r=function(){n.e("components/calendar/calendarYxb").then(function(){return resolve(n("0e09"))}.bind(null,n)).catch(n.oe)},i=function(){n.e("components/calendar/calendarXxxq").then(function(){return resolve(n("50fe"))}.bind(null,n)).catch(n.oe)},s=function(){n.e("components/calendar/calendarEtylzj").then(function(){return resolve(n("9c64"))}.bind(null,n)).catch(n.oe)},c=function(){n.e("components/calendar/calendarXsqcgl").then(function(){return resolve(n("f8fe"))}.bind(null,n)).catch(n.oe)},u=function(){n.e("components/calendar/calendarFczs").then(function(){return resolve(n("02a8"))}.bind(null,n)).catch(n.oe)},d=function(){n.e("components/calendar/calendarDdbsyht").then(function(){return resolve(n("7633"))}.bind(null,n)).catch(n.oe)},l=function(){n.e("components/menu/menuBox").then(function(){return resolve(n("96f3"))}.bind(null,n)).catch(n.oe)},g=function(){n.e("components/dcReport/dc").then(function(){return resolve(n("25b3"))}.bind(null,n)).catch(n.oe)},f={components:{calendarYxb:r,calendarXxxq:i,calendarEtylzj:s,calendarXsqcgl:c,calendarFczs:u,calendarDdbsyht:d,menuBox:l,dc:g},data:function(){return{userInfo:"",swiperList:[],taskList:[],dcDetail:"",uid:"",name:"",phone:"",task:[],taskTotal:0,dev:0,_id:"",doctorInfo:"",sjkids:"0e12",show:!1,check:0}},onLoad:function(){this.getMiniAppInfo(),this.getSwiper()},onShow:function(){if(this.check=Math.random(),t.getStorageSync("task"))for(var e in this.task=t.getStorageSync("task"),this.taskTotal=0,this.task)0==this.task[e]&&this.taskTotal++},methods:{getMiniAppInfo:function(){var e=this;wx.request({url:a.globalData.https+"/miniApi/getBaseInfo",method:"POST",data:{appid:a.globalData.appid},success:function(n){if(1==n.data.code){if(e.dev=n.data.data.dev,e.sjkids=n.data.data.sjkids,t.setStorageSync("sjkids",n.data.data.sjkids),t.setStorageSync("dev",n.data.data.dev),e.getTask(),1==e.dev&&(!t.getStorageSync("uid")||!t.getStorageSync("phone")))return t.navigateTo({url:"/pages/authorization/authorization"}),!1;t.getStorageSync("uid")&&(e.uid=t.getStorageSync("uid"),e.userInfo=t.getStorageSync("userInfo"),e.name=t.getStorageSync("name")?t.getStorageSync("name"):e.userInfo.nickName,e.phone=t.getStorageSync("phone"),e._id=t.getStorageSync("_id"),e.task=t.getStorageSync("task"),t.getStorageSync("phone")&&e.getXunshuDoctorsjk(),e.show=n.data.data.dev)}else console.log(n.data.message)}})},getTask:function(){var e=this;wx.request({url:a.globalData.https+"/task/taskList",method:"POST",data:{sjkids:t.getStorageSync("sjkids")?t.getStorageSync("sjkids"):"0e12"},success:function(t){1==t.data.code?e.taskList=t.data.data:console.log(t.data.message)}})},getSwiper:function(){var e=this;wx.request({url:a.globalData.https+"/MiniApi/swiperList",method:"POST",data:{sjkids:t.getStorageSync("sjkids")?t.getStorageSync("sjkids"):"0e12"},success:function(t){1==t.data.code?e.swiperList=t.data.data:console.log(t.data.message)}})},getReportList:function(){var e=this;wx.request({url:a.globalData.doctorHttps+"/getAllForm",method:"GET",data:{templateid:t.getStorageSync("sjkids"),mid:"scan_user_basic"},success:function(n){if(n.data.success){var a=[];for(var r in n.data.result.reverse())n.data.result[r].phone==t.getStorageSync("phone")&&(n.data.result[r].create_time=o.formatTimeHms(new Date(n.data.result[r].create_time)),a.push(n.data.result[r]));e.dcDetail=a[0],console.log(e.dcDetail)}}})},getXunshuDoctorsjk:function(){var e=this;wx.request({url:a.globalData.appHttps+"/xunshuDoctorsjklist",method:"GET",header:{Accept:"*/*","Content-Type":"application/json;charset=UTF-8","X-Access-Token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJleHAiOjE2MTg3OTY1NzMsInVzZXJuYW1lIjoieHMxODB4eHh4ODQ4NCJ9.vURqw-2UrWXA_mjL69Ts5vZfEmKl1M8ZSIqKf25A-iY"},data:{pageSize:1e3},success:function(n){if(200==n.data.code){var a=n.data.result.records.find((function(e){return e.sjkids==t.getStorageSync("sjkids")}));e.doctorInfo=a,t.setStorageSync("illnessInfo",a)}else console.log(n.data.message)}})},getRecord:function(){var e=this;wx.request({url:a.globalData.https+"/record/record",method:"GET",data:{id:t.getStorageSync("phone")},success:function(t){1==t.data.code?e.calendarData=t.data:console.log(t.data.message)}})},unique:function(t){for(var e=0;e<t.length-1;e++)for(var n=e+1;n<t.length;n++)t[e].name==t[n].name&&(t.splice(n,1),n--);return t},toTask:function(e,n){var a=this;if(!t.getStorageSync("uid")&&1==this.dev)return t.navigateTo({url:"/pages/authorization/authorization"}),!1;this.toH5(n+"?uid="+t.getStorageSync("phone")),setTimeout((function(){a.task[e]=1,t.setStorageSync("task",a.task)}),1e3)},toH5:function(e){if(!t.getStorageSync("uid")&&1==this.dev)return t.navigateTo({url:"/pages/authorization/authorization"}),!1;t.navigateTo({url:"/pages/h5/h5?url="+encodeURIComponent(JSON.stringify(e))})},toWebViewer:function(e){if(!t.getStorageSync("uid"))return t.navigateTo({url:"/pages/authorization/authorization"}),!1;t.navigateTo({url:"/pages/webViewer/webViewer?url="+encodeURIComponent(e+"?uid+"+t.getStorageSync("phone"))})},toAuth:function(){t.navigateTo({url:"/pages/authorization/authorization"})},dateFormat:function(t,e){var n,a={"Y+":e.getFullYear().toString(),"m+":(e.getMonth()+1).toString(),"d+":e.getDate().toString(),"H+":e.getHours().toString(),"M+":e.getMinutes().toString(),"S+":e.getSeconds().toString()};for(var o in a)n=new RegExp("("+o+")").exec(t),n&&(t=t.replace(n[1],1==n[1].length?a[o]:a[o].padStart(n[1].length,"0")));return t},Replace:function(t,e,n){return t.split(e).join(n)},parseDate:function(t){return new Date(this.Replace(t,"-","/"))},AddDays:function(t,e){return t=this.parseDate(t),t.setDate(t.getDate()+e),this.dateFormat("YYYY-mm-dd",t)},dateStr:function(t){var e,n=new Date(t).getTime(),a=(new Date).getTime();return a=parseInt((a-n)/1e3),a<600?"刚刚":a<3600&&a>=600?(e=Math.floor(a/60),e+"分钟前"):a<86400&&a>=3600?(e=Math.floor(a/60/60),e+"小时前"):a<259200&&a>=86400?(e=Math.floor(a/60/60/24),e+"天前"):t}}};e.default=f}).call(this,n("543d")["default"])},bb60:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return a}));var a={uIcon:function(){return n.e("node-modules/uview-ui/components/u-icon/u-icon").then(n.bind(null,"f2a6"))},uSwiper:function(){return n.e("node-modules/uview-ui/components/u-swiper/u-swiper").then(n.bind(null,"e50e"))}},o=function(){var t=this,e=t.$createElement;t._self._c},r=[]},ccc1:function(t,e,n){"use strict";n.r(e);var a=n("bb60"),o=n("1306");for(var r in o)"default"!==r&&function(t){n.d(e,t,(function(){return o[t]}))}(r);n("f010");var i,s=n("f0c5"),c=Object(s["a"])(o["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],i);e["default"]=c.exports},f010:function(t,e,n){"use strict";var a=n("72be"),o=n.n(a);o.a}},[["0dc2","common/runtime","common/vendor"]]]);