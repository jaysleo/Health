(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/seeDoctor/seeDoctor"],{"713a":function(e,t,n){"use strict";(function(e){n("a76a");o(n("66fd"));var t=o(n("ecbe"));function o(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},"799b":function(e,t,n){"use strict";n.r(t);var o=n("8116"),u=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=u.a},8116:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=getApp(),o={data:function(){return{phone:"",userInfo:"",numList:[{name:"记录PASI和BSA分数"},{name:"记录生物制剂情况"},{name:"记录你的基础数值"}],stepFrom:{pasi:60,bsa:60,drugType:"",drugTotal:"",drugPrice:"",bodyType:"",mmHgHigh:"",mmHgLow:"",mmol:"",HbAlc:"",insulin:"",Cpeptide:""},step:3,list:[{name:"拓咨",disabled:!1},{name:"可善挺",disabled:!1},{name:"修美乐",disabled:!1},{name:"特诺雅",disabled:!1},{name:"写斯奴",disabled:!1},{name:"益赛普",disabled:!1}],userModal:!1}},onLoad:function(){e.getStorageSync("phone")||e.navigateTo({url:"/pages/authorization/authorization"})},onShow:function(){e.getStorageSync("phone")&&(this.phone=e.getStorageSync("phone")),e.getStorageSync("userInfo")&&(this.userInfo=e.getStorageSync("userInfo"))},methods:{save:function(){var t=this;wx.request({url:n.globalData.doctorHttps+"/addPatient",method:"POST",data:{templateid:"0e12",phone:e.getStorageSync("phone"),isYxb:this.isYxb,firstSickenTime:this.sickenTime},success:function(e){console.log(e.data.success),e.data.success&&(t.userModal=!1)}})},getPhone:function(t){var o=this;wx.request({url:n.globalData.https+"/Auth/getPhone",method:"POST",data:{sessionKey:this.userInfo.session_key,encryptedData:t.detail.encryptedData,iv:t.detail.iv},success:function(t){1==t.data.code?wx.request({url:n.globalData.https+"/wechat/queryOpenid",method:"POST",data:{unionid:o.userInfo.unionid},success:function(u){wx.request({url:n.globalData.doctorHttps+"/addPatient",method:"POST",data:{templateid:"0e12",name:o.userInfo.name,phone:t.data.data.purePhoneNumber,openid:u.data.data,miniOpenid:o.userInfo.openid,unionid:o.userInfo.unionid,gender:o.userInfo.gender,nickName:o.userInfo.nickName,avatarUrl:o.userInfo.avatarUrl,country:o.userInfo.country,province:o.userInfo.province,city:o.userInfo.city,source:"miniProgram"},success:function(n){console.log(n.data.success),n.data.success&&(o.phone=t.data.data.purePhoneNumber,e.setStorageSync("phone",t.data.data.purePhoneNumber),o.stepSubmit1())}})}}):wx.showToast({title:t.data.msg,icon:"none"})}})},stepSubmit0:function(){this.step=1},stepSubmit1:function(){return this.stepFrom.pasi?this.stepFrom.bsa?void(this.step=2):(e.showToast({title:"请填写BSA评分",icon:"none"}),!1):(e.showToast({title:"请填写PASI评分",icon:"none"}),!1)},stepSubmit2:function(){return this.stepFrom.drugType?this.stepFrom.drugTotal?this.stepFrom.drugPrice?void(this.step=3):(e.showToast({title:"请填写花了多少钱",icon:"none"}),!1):(e.showToast({title:"请填写打了几支",icon:"none"}),!1):(e.showToast({title:"请选择生物制剂",icon:"none"}),!1)},submit:function(){wx.request({url:n.globalData.doctorHttps+"/saveFormDetail",method:"POST",data:{templateid:"0e12",mid:"scan_user_basic",isMicroApp:1,title:"就诊问卷",phone:e.getStorageSync("phone"),pasi:this.stepFrom.pasi,bsa:this.stepFrom.bsa,drugType:this.stepFrom.drugType,drugTotal:this.stepFrom.drugTotal,drugPrice:this.stepFrom.drugPrice,mmHgHigh:this.stepFrom.mmHgHigh,mmHgLow:this.stepFrom.mmHgLow,mmol:this.stepFrom.mmol,HbAlc:this.stepFrom.HbAlc,insulin:this.stepFrom.insulin,Cpeptide:this.stepFrom.Cpeptide,isYxb:this.isYxb,firstSickenTime:this.sickenTime},success:function(t){t.data.success&&e.reLaunch({url:"../report/report?id="+t.data.result._id})}})}}};t.default=o}).call(this,n("543d")["default"])},9798:function(e,t,n){"use strict";var o=n("cf70"),u=n.n(o);u.a},cf70:function(e,t,n){},ecbe:function(e,t,n){"use strict";n.r(t);var o=n("f3bf"),u=n("799b");for(var i in u)"default"!==i&&function(e){n.d(t,e,(function(){return u[e]}))}(i);n("9798");var s,a=n("f0c5"),r=Object(a["a"])(u["default"],o["b"],o["c"],!1,null,"67d394c0",null,!1,o["a"],s);t["default"]=r.exports},f3bf:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var o={uImage:function(){return n.e("node-modules/uview-ui/components/u-image/u-image").then(n.bind(null,"6bbe"))},uSteps:function(){return n.e("node-modules/uview-ui/components/u-steps/u-steps").then(n.bind(null,"de2b"))},uButton:function(){return n.e("node-modules/uview-ui/components/u-button/u-button").then(n.bind(null,"a022"))},uForm:function(){return n.e("node-modules/uview-ui/components/u-form/u-form").then(n.bind(null,"800d"))},uFormItem:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u-form-item/u-form-item")]).then(n.bind(null,"6bde"))},uNumberBox:function(){return n.e("node-modules/uview-ui/components/u-number-box/u-number-box").then(n.bind(null,"b406"))},uRadioGroup:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u-radio-group/u-radio-group")]).then(n.bind(null,"6f90"))},uRadio:function(){return n.e("node-modules/uview-ui/components/u-radio/u-radio").then(n.bind(null,"8a60"))},uInput:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u-input/u-input")]).then(n.bind(null,"1d64"))}},u=function(){var e=this,t=e.$createElement;e._self._c},i=[]}},[["713a","common/runtime","common/vendor"]]]);