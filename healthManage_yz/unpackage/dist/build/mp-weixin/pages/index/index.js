(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{3970:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return a}));var a={uLoading:function(){return n.e("node-modules/uview-ui/components/u-loading/u-loading").then(n.bind(null,"cd5e"))},report:function(){return n.e("components/report/report").then(n.bind(null,"4f6c"))},uGrid:function(){return n.e("node-modules/uview-ui/components/u-grid/u-grid").then(n.bind(null,"3f08"))},uGridItem:function(){return n.e("node-modules/uview-ui/components/u-grid-item/u-grid-item").then(n.bind(null,"9e35"))},uBadge:function(){return n.e("node-modules/uview-ui/components/u-badge/u-badge").then(n.bind(null,"aa39"))},uIcon:function(){return n.e("node-modules/uview-ui/components/u-icon/u-icon").then(n.bind(null,"6b15"))},uSwiper:function(){return n.e("node-modules/uview-ui/components/u-swiper/u-swiper").then(n.bind(null,"98fa"))},uNoticeBar:function(){return n.e("node-modules/uview-ui/components/u-notice-bar/u-notice-bar").then(n.bind(null,"4f28"))},uModal:function(){return n.e("node-modules/uview-ui/components/u-modal/u-modal").then(n.bind(null,"ed67"))},uButton:function(){return n.e("node-modules/uview-ui/components/u-button/u-button").then(n.bind(null,"a022"))}},o=function(){var t=this,e=t.$createElement;t._self._c},i=[]},5228:function(t,e,n){"use strict";(function(t){var a;function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=getApp(),r=n("5835"),u=function(){n.e("components/calendar/calendarYxb").then(function(){return resolve(n("781f"))}.bind(null,n)).catch(n.oe)},s=function(){n.e("components/dcReport/dc").then(function(){return resolve(n("e97d"))}.bind(null,n)).catch(n.oe)},d=function(){n.e("components/report/report").then(function(){return resolve(n("4f6c"))}.bind(null,n)).catch(n.oe)},c={components:{calendarYxb:u,dc:s,report:d},data:function(){return{setIntervalId:"",msgList:[],msgListTotal:0,userInfo:"",swiperList:[],noticeList:[],taskList:[],dcDetail:"",uid:"",name:"",phone:"",phoneModal:!1,task:[],taskTotal:5,dev:0,_id:"",doctorInfo:"",planModal:!1,yongyaoList:[],recordId:"",nextDay:"",sjkids:"0e12",show:!1,calendarData:"",loading:!1}},onLoad:function(){this.getMiniAppInfo(),this.getSwiper()},onShow:function(){this.dev=t.getStorageSync("dev"),t.getStorageSync("phone")&&this.getRecord()},onHide:function(){clearInterval(this.setIntervalId)},onUnload:function(){clearInterval(this.setIntervalId)},watch:{dev:function(){this.dev=t.getStorageSync("dev")}},methods:(a={getMiniAppInfo:function(){var e=this;wx.request({url:i.globalData.https+"/miniApi/getBaseInfo",method:"POST",data:{appid:i.globalData.appid},success:function(n){if(1==n.data.code){if(e.dev=n.data.data.dev,e.sjkids=n.data.data.sjkids,t.setStorageSync("sjkids",n.data.data.sjkids),t.setStorageSync("dev",n.data.data.dev),1!=e.dev||t.getStorageSync("uid")&&t.getStorageSync("phone")||t.navigateTo({url:"/pages/authorization/authorization"}),t.getStorageSync("uid")){e.uid=t.getStorageSync("uid"),e.userInfo=t.getStorageSync("userInfo"),e.name=t.getStorageSync("name")?t.getStorageSync("name"):e.userInfo.nickName,e.phone=t.getStorageSync("phone"),e._id=t.getStorageSync("_id"),e.task=t.getStorageSync("task");var a=0;for(var o in e.task)0==e.task[o]&&a++;e.taskTotal=a,t.getStorageSync("phone")&&e.getXunshuDoctorsjk(),e.show=n.data.data.dev}}else console.log(n.data.message)}})},getSwiper:function(){var e=this;wx.request({url:i.globalData.https+"/MiniApi/swiperList",method:"POST",data:{sjkids:t.getStorageSync("sjkids")?t.getStorageSync("sjkids"):"0e12"},success:function(t){1==t.data.code?e.swiperList=t.data.data:console.log(t.data.message)}})},getReportList:function(){var e=this;wx.request({url:i.globalData.doctorHttps+"/getAllForm",method:"GET",data:{templateid:t.getStorageSync("sjkids"),mid:"scan_user_basic"},success:function(n){if(n.data.success){var a=[];for(var o in n.data.result.reverse())n.data.result[o].phone==t.getStorageSync("phone")&&(n.data.result[o].create_time=r.formatTimeHms(new Date(n.data.result[o].create_time)),a.push(n.data.result[o]));e.dcDetail=a[0],console.log(e.dcDetail)}}})},getXunshuDoctorsjk:function(){var e=this;wx.request({url:i.globalData.appHttps+"/xunshuDoctorsjklist",method:"GET",header:{Accept:"*/*","Content-Type":"application/json;charset=UTF-8","X-Access-Token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJleHAiOjE2MTg3OTY1NzMsInVzZXJuYW1lIjoieHMxODB4eHh4ODQ4NCJ9.vURqw-2UrWXA_mjL69Ts5vZfEmKl1M8ZSIqKf25A-iY"},data:{pageSize:1e3},success:function(n){if(200==n.data.code){var a=n.data.result.records.find((function(e){return e.sjkids==t.getStorageSync("sjkids")}));e.doctorInfo=a,t.setStorageSync("illnessInfo",a),e.getChatMsg(),e.getRecord(),e.setIntervalId=setInterval((function(){e.getChatMsg()}),3e3)}else console.log(n.data.message)}})},getRecord:function(){var e=this;this.loading=!0,wx.request({url:i.globalData.https+"/record/record",method:"GET",data:{id:t.getStorageSync("phone")},success:function(t){e.loading=!1,1==t.data.code?e.calendarData=t.data:console.log(t.data.message)}})},dayChange:function(e){e.info?((e.info.type2||e.info.type1)&&(this.planModal=!0,this.recordId=e.info.recordId),e.info.type5&&"595f"==this.sjkids&&this.toH5("https://api.ifufan.com/ylzj_tu/index.html?uid="+this.phone),e.info.type5&&"196a"==this.sjkids&&this.toH5("https://api.ifufan.com/xxxy_tu/index.html?uid="+this.phone)):("0e12"==this.sjkids&&this.toH5("https://guat.bigecko.com/web01/index.html#/answer?uid="+this.phone+"&currentDate="+e.fullDate),"595f"==this.sjkids&&t.navigateTo({url:"/pages/report/reportDay?date="+e.fullDate}),"196a"==this.sjkids&&t.navigateTo({url:"/pages/report/reportDay1?date="+e.fullDate}))},unique:function(t){for(var e=0;e<t.length-1;e++)for(var n=e+1;n<t.length;n++)t[e].name==t[n].name&&(t.splice(n,1),n--);return t},getChatMsg:function(){var e=this;wx.request({url:i.globalData.appHttps+"/chat/unread",method:"GET",data:{senderid:t.getStorageSync("illnessInfo").id,receiverid:t.getStorageSync("phone")},success:function(t){if(200==t.data.code){e.msgList=t.data.data,e.msgListTotal=t.data.data.length;var n=[];for(var a in t.data.data)n.push(e.dateStr(t.data.data[a].time)+"医生给你发了一条消息。");e.noticeList=n}else console.log(t.data.message)}})},toTask:function(e,n){var a=this;if(!t.getStorageSync("uid")&&1==this.dev)return t.navigateTo({url:"/pages/authorization/authorization"}),!1;this.toH5(n+"?uid="+t.getStorageSync("phone")),setTimeout((function(){a.task[e]=1,t.setStorageSync("task",a.task)}),1e3)},toMyQuestionnaires:function(){if(!t.getStorageSync("uid"))return t.navigateTo({url:"/pages/authorization/authorization"}),!1;t.navigateTo({url:"/pages/questionnaires/questionnaires"})},toH5:function(e){if(!t.getStorageSync("uid")&&1==this.dev)return t.navigateTo({url:"/pages/authorization/authorization"}),!1;t.navigateTo({url:"/pages/h5/h5?url="+encodeURIComponent(JSON.stringify(e))})},toWebViewer:function(e){if(!t.getStorageSync("uid"))return t.navigateTo({url:"/pages/authorization/authorization"}),!1;t.navigateTo({url:"/pages/webViewer/webViewer?url="+encodeURIComponent(e+"?uid+"+t.getStorageSync("phone"))})},toExp:function(){if(!t.getStorageSync("uid"))return t.navigateTo({url:"/pages/authorization/authorization"}),!1;t.navigateTo({url:"/pages/exp/exp"})},toAdvisory:function(){if(!t.getStorageSync("uid"))return t.navigateTo({url:"/pages/authorization/authorization"}),!1;t.navigateTo({url:"/pages/advisory/advisory"})}},o(a,"toExp",(function(){if(!t.getStorageSync("uid"))return t.navigateTo({url:"/pages/authorization/authorization"}),!1;t.navigateTo({url:"/pages/exp/exp"})})),o(a,"toReportDay",(function(){if(!t.getStorageSync("uid"))return t.navigateTo({url:"/pages/authorization/authorization1"}),!1;t.navigateTo({url:"/pages/report/reportDay"})})),o(a,"toReportDay1",(function(){if(!t.getStorageSync("uid"))return t.navigateTo({url:"/pages/authorization/authorization1"}),!1;t.navigateTo({url:"/pages/report/reportDay1"})})),o(a,"toAuth",(function(){t.navigateTo({url:"/pages/authorization/authorization"})})),o(a,"toMy",(function(){if(!t.getStorageSync("uid"))return t.navigateTo({url:"/pages/authorization/authorization"}),!1;t.navigateTo({url:"/pages/my/my"})})),o(a,"toSeeDoctor",(function(){t.navigateTo({url:"/pages/seeDoctor/seeDoctor"})})),o(a,"dateFormat",(function(t,e){var n,a={"Y+":e.getFullYear().toString(),"m+":(e.getMonth()+1).toString(),"d+":e.getDate().toString(),"H+":e.getHours().toString(),"M+":e.getMinutes().toString(),"S+":e.getSeconds().toString()};for(var o in a)n=new RegExp("("+o+")").exec(t),n&&(t=t.replace(n[1],1==n[1].length?a[o]:a[o].padStart(n[1].length,"0")));return t})),o(a,"Replace",(function(t,e,n){return t.split(e).join(n)})),o(a,"parseDate",(function(t){return new Date(this.Replace(t,"-","/"))})),o(a,"AddDays",(function(t,e){return t=this.parseDate(t),t.setDate(t.getDate()+e),this.dateFormat("YYYY-mm-dd",t)})),o(a,"dateStr",(function(t){var e,n=new Date(t).getTime(),a=(new Date).getTime();return a=parseInt((a-n)/1e3),a<600?"刚刚":a<3600&&a>=600?(e=Math.floor(a/60),e+"分钟前"):a<86400&&a>=3600?(e=Math.floor(a/60/60),e+"小时前"):a<259200&&a>=86400?(e=Math.floor(a/60/60/24),e+"天前"):t})),a)};e.default=c}).call(this,n("543d")["default"])},"7c1c":function(t,e,n){"use strict";var a=n("d0b4"),o=n.n(a);o.a},"818e":function(t,e,n){"use strict";(function(t){n("a76a");a(n("66fd"));var e=a(n("b46d"));function a(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},b46d:function(t,e,n){"use strict";n.r(e);var a=n("3970"),o=n("e5f6");for(var i in o)"default"!==i&&function(t){n.d(e,t,(function(){return o[t]}))}(i);n("7c1c");var r,u=n("f0c5"),s=Object(u["a"])(o["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],r);e["default"]=s.exports},d0b4:function(t,e,n){},e5f6:function(t,e,n){"use strict";n.r(e);var a=n("5228"),o=n.n(a);for(var i in a)"default"!==i&&function(t){n.d(e,t,(function(){return a[t]}))}(i);e["default"]=o.a}},[["818e","common/runtime","common/vendor"]]]);