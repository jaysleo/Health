(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/exp/exp"],{"447f":function(t,e,n){"use strict";(function(t){n("a76a");o(n("66fd"));var e=o(n("be2c"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},be2c:function(t,e,n){"use strict";n.r(e);var o=n("c518"),i=n("ebcc");for(var a in i)"default"!==a&&function(t){n.d(e,t,(function(){return i[t]}))}(a);n("ff68");var u,r=n("f0c5"),c=Object(r["a"])(i["default"],o["b"],o["c"],!1,null,"2d405b1e",null,!1,o["a"],u);e["default"]=c.exports},c518:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return o}));var o={uRow:function(){return n.e("node-modules/uview-ui/components/u-row/u-row").then(n.bind(null,"9295"))},uCol:function(){return n.e("node-modules/uview-ui/components/u-col/u-col").then(n.bind(null,"6bb1"))},uImage:function(){return n.e("node-modules/uview-ui/components/u-image/u-image").then(n.bind(null,"6bbe"))},uButton:function(){return n.e("node-modules/uview-ui/components/u-button/u-button").then(n.bind(null,"a022"))},uEmpty:function(){return n.e("node-modules/uview-ui/components/u-empty/u-empty").then(n.bind(null,"8001"))},uIcon:function(){return n.e("node-modules/uview-ui/components/u-icon/u-icon").then(n.bind(null,"6b15"))},uModal:function(){return n.e("node-modules/uview-ui/components/u-modal/u-modal").then(n.bind(null,"ed67"))},uForm:function(){return n.e("node-modules/uview-ui/components/u-form/u-form").then(n.bind(null,"800d"))},uFormItem:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u-form-item/u-form-item")]).then(n.bind(null,"6bde"))},uInput:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u-input/u-input")]).then(n.bind(null,"1d64"))},uUpload:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u-upload/u-upload")]).then(n.bind(null,"28b6"))}},i=function(){var t=this,e=t.$createElement;t._self._c;t._isMounted||(t.e0=function(e){t.addModal=!0})},a=[]},cdac:function(t,e,n){},ebcc:function(t,e,n){"use strict";n.r(e);var o=n("f795"),i=n.n(o);for(var a in o)"default"!==a&&function(t){n.d(e,t,(function(){return o[t]}))}(a);e["default"]=i.a},f795:function(t,e,n){"use strict";(function(t){function n(t){return u(t)||a(t)||i(t)||o()}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(t,e){if(t){if("string"===typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}function a(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function u(t){if(Array.isArray(t))return r(t)}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var c=getApp(),s={data:function(){return{commentList:[],show:!1,addModal:!1,addForm:{},replyModal:!1,replyContent:"",pagenumber:1,pagesize:5,imgs:[]}},onLoad:function(){this.getExpList()},onShow:function(){},watch:{commentList:function(){var t=this;this.show=!1,setTimeout((function(){t.show=!0}),10)}},onReachBottom:function(){this.getExpList()},methods:{getExpList:function(){var t=this;wx.request({url:c.globalData.appHttps+"/topic/gettopic",method:"GET",header:{Accept:"*/*","Content-Type":"application/json;charset=UTF-8","X-Access-Token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJleHAiOjE2MTg3OTY1NzMsInVzZXJuYW1lIjoieHMxODB4eHh4ODQ4NCJ9.vURqw-2UrWXA_mjL69Ts5vZfEmKl1M8ZSIqKf25A-iY"},data:{sjkids:"0e12",pagesize:this.pagesize,pagenumber:this.pagenumber,hasReply:1},success:function(e){if(200==e.data.code&&e.data.data.length>0){for(var o in e.data.data)for(var i in e.data.data[o].imgs=JSON.parse(e.data.data[o].imgs),e.data.data[o].sendtime=t.dateStr(e.data.data[o].sendtime),e.data.data[o].replys)e.data.data[o].replys[i].time=t.dateStr(e.data.data[o].replys[i].time);setTimeout((function(){t.commentList=[].concat(n(t.commentList),n(e.data.data)),t.pagenumber++}),500)}}})},reply:function(t){this.replyId=t,this.replyModal=!0},replySend:function(){var e=this;if(!this.replyContent)return t.showToast({title:"请填写内容",icon:"none"}),!1;wx.request({url:c.globalData.appHttps+"/topic/addReply",method:"POST",header:{Accept:"*/*","Content-Type":"application/json;charset=UTF-8","X-Access-Token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJleHAiOjE2MTg3OTY1NzMsInVzZXJuYW1lIjoieHMxODB4eHh4ODQ4NCJ9.vURqw-2UrWXA_mjL69Ts5vZfEmKl1M8ZSIqKf25A-iY"},data:{topicid:this.replyId,content:this.replyContent,name:t.getStorageSync("userInfo").nickName,avatar:t.getStorageSync("userInfo").avatarUrl},success:function(n){200==n.data.code&&(t.showToast({title:"提交成功"}),e.replyModal=!1,e.pagenumber=1,e.commentList=[],e.getExpList())}})},add:function(){var e=this;return this.addForm.title?this.addForm.msgContent?void wx.request({url:c.globalData.appHttps+"/topic/addTopic",method:"POST",header:{Accept:"*/*","Content-Type":"application/json;charset=UTF-8","X-Access-Token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJleHAiOjE2MTg3OTY1NzMsInVzZXJuYW1lIjoieHMxODB4eHh4ODQ4NCJ9.vURqw-2UrWXA_mjL69Ts5vZfEmKl1M8ZSIqKf25A-iY"},data:{sjkids:"0e12",title:this.addForm.title,content:this.addForm.msgContent,imgs:JSON.stringify(this.imgs),sendername:t.getStorageSync("userInfo").nickName,avatar:t.getStorageSync("userInfo").avatarUrl},success:function(n){200==n.data.code&&(t.showToast({title:"提交成功"}),e.addModal=!1,e.pagenumber=1,e.commentList=[],e.getExpList())}}):(t.showToast({title:"请填写内容",icon:"none"}),!1):(t.showToast({title:"请填写标题",icon:"none"}),!1)},imgUpload:function(t){console.log(t),200==t.code&&(this.imgs.push("https://api.ifufan.com:8800/img/"+t.data.filename),console.log(this.imgs))},previewImage:function(t,e){wx.previewImage({current:t,urls:e})},dateStr:function(t){var e,n=(new Date).getTime();return n=parseInt((n-t)/1e3),n<600?"刚刚":n<3600&&n>=600?(e=Math.floor(n/60),e+"分钟前"):n<86400&&n>=3600?(e=Math.floor(n/60/60),e+"小时前"):n<259200&&n>=86400?(e=Math.floor(n/60/60/24),e+"天前"):t}}};e.default=s}).call(this,n("543d")["default"])},ff68:function(t,e,n){"use strict";var o=n("cdac"),i=n.n(o);i.a}},[["447f","common/runtime","common/vendor"]]]);